# 讯飞语音转写工具

## 项目简介

本项目是一个基于科大讯飞开放平台的语音转写工具，可以将音频文件转换为文本，并支持说话人分离功能。该工具使用Python开发，通过讯飞语音听写API进行音频转写，可以识别多个说话人并输出带有时间戳的文本内容。

## 功能特点

- 将音频文件转写为文本
- 支持说话人角色分离
- 可自动识别多个说话人或指定说话人数量
- 输出格式化文本，包含时间戳和说话人标识
- 按时间顺序输出转写结果

## 环境要求

- Python 3.6+
- 必要的Python库：requests, json, time, os, base64, hashlib, hmac

## 安装使用

1. 克隆或下载本项目到本地

2. 安装依赖库

3. 在科大讯飞开放平台注册账号并创建应用
    - 访问 https://www.xfyun.cn/ 注册账号
    - 创建应用并获取APPID和ApiKey
    - 开通语音转写服务

4. 配置应用参数

    在代码中替换appid和secret_key为您的应用信息

```
    api = RequestApi(appid="您的APPID",
                    secret_key="您的ApiKey",
                    upload_file_path="audio/您的音频文件")
```

5. 运行程序

```
    python main.py
```

## 参数说明
roleType: 控制是否启用说话人分离，1为启用

roleNum: 指定说话人数量，0为自动识别

candidate: 添加候选词参数，提高识别准确率

## 输出格式
程序将生成result.txt文件，包含以下内容：


### 发言人列表
- 发言人 1: 段落-1

- 发言人 2: 段落-2


### 按时间顺序的对话内容

- [00:01.190] [发言人1] 文本内容...

- [00:07.040] [发言人2] 文本内容...


## 注意事项
请确保您有足够的科大讯飞账户余额或相应服务权限

大文件转写可能需要较长时间，程序会等待直到转写完成

API调用有频率限制，请合理控制请求频率

## 常见问题
Q: 如何提高说话人分离的准确率？

A: 如果您能确定音频中的说话人数量，可以在代码中指定roleNum参数，而不是使用自动识别。

Q: 支持哪些音频格式？

A: 科大讯飞语音转写支持wav、mp3、pcm等多种格式，详情请参考讯飞官方文档。

## 许可证
本项目仅供学习和参考使用，使用时请遵守科大讯飞开放平台的使用条款和相关法律法规。 ```